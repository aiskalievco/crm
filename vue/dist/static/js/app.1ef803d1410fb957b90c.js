webpackJsonp([1],{0:function(t,e){},"6+Z3":function(t,e){},"77F0":function(t,e){},FUi0:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=o("VU/8")({name:"App"},s,!1,function(t){o("zjCt")},null,null).exports,a=o("mvHQ"),r=o.n(a),l=o("/ocq"),p={data:function(){return{login:"",password:"",msg:"",resource:null}},props:{changeIsLogged:Function},methods:{authorize:function(){var t=this.login,e=this.password;if(t&&e)this.resource=this.$resource("authorization"),this.resource.get({login:t,password:e}).then(function(o){var i=o.data;if(!1!==i)this.$cookie.set("auth",r()({login:t,password:e}),1),this.$store.dispatch("loadPerson",i),this.$props.changeIsLogged(!0);else{this.msg="Ошибка! Неправильный логин или пароль";var s=this;setTimeout(function(){s.msg=""},4e3)}},function(t){});else{this.msg="Пожалуйста заполните данные перед отправкой";var o=this;setTimeout(function(){o.msg=""},4e3)}}}},c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("form",{staticClass:"login-form login-form--style",on:{submit:function(e){return e.preventDefault(),t.authorize(e)}}},[o("h3",{staticClass:"login-form__header"},[t._v("Авторизация")]),t._v(" "),o("p",{staticClass:"par login-form__msg"},[t._v(t._s(t.msg))]),t._v(" "),o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n        Логин:\n      ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"text",placeholder:"Логин"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n        Пароль:\n      ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),o("div",{staticClass:"login-form__register"},[t._v("\n      У Вас нет аккаунта?\n      "),o("router-link",{staticClass:"link login-form__register-link",attrs:{to:"/register",tag:"a"}},[t._v("\n        Зарегистрироваться\n      ")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-form__button-wrapper"},[e("input",{staticClass:"login-form__button login-form__button--style",attrs:{type:"submit",value:"Войти"}})])}]};var u=o("VU/8")(p,c,!1,function(t){o("FUi0")},"data-v-75f848ee",null).exports,m=o("rGv/"),d=o.n(m),_={data:function(){return{isLogged:!1}},components:{loginForm:u},methods:{changeIsLogged:function(t){this.isLogged=t}},computed:{role:function(){return console.log("Storage: "+this.$store.getters.getRole),console.log("Name: "+d.a.roleAdmin),console.log("Compare: "+this.$store.getters.getRole.toLowerCase().localeCompare(d.a.roleAdmin.toLowerCase())),0===this.$store.getters.getRole.toLowerCase().localeCompare(d.a.roleAdmin.toLowerCase())?"Аккаунт Организации":"Аккаунт Пользователя"}},created:function(){this.$cookie.get("auth")&&(this.isLogged=!0)}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[this.isLogged?e("div",{staticClass:"home-content"},[this._v("\n\n  "+this._s(this.role)+"\n\n  ")]):e("login-form",{attrs:{changeIsLogged:this.changeIsLogged}})],1)},staticRenderFns:[]};var f=o("VU/8")(_,g,!1,function(t){o("hgUZ")},"data-v-db803ee6",null).exports,v={data:function(){return{isDefault:!0,isCompany:!1,login:"",password:"",repeatedPassword:"",email:"",msg:"",companyName:"",description:"",specialization:"",resource:null}},methods:{register:function(){var t=this.password,e=this.repeatedPassword;if(this.checkPassword(t,e)){var o={login:this.login,password:this.password,email:this.email},i="registration";this.isCompany&&(i="organizationreg",o.name=this.companyName,o.description=this.description,o.specialization=this.specialization),this.resource=this.$resource(i),this.resource.get(o).then(function(t){this.$router.push("/")},function(t){console.log(t)})}else{this.msg="Ваши пароли не совпадают";var s=this;setTimeout(function(){s.msg=""},4e3)}},checkPassword:function(t,e){return 0===t.toString().toLowerCase().localeCompare(e.toString().toLowerCase())},chooseType:function(t){this.isCompany=t,this.isDefault=!1},returnBack:function(){this.isCompany=!1,this.isDefault=!0}},computed:{registerName:function(){return this.isCompany?"Организации":"Пользователя"}}},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.isDefault?o("div",{staticClass:"registration-default"},[o("h2",{staticClass:"registration-default__header"},[t._v("Выберите тип аккаунта")]),t._v(" "),o("div",{staticClass:"registration-default__wrapper"},[o("div",{staticClass:"registration-default__block"},[o("button",{staticClass:"registration-default__button",on:{click:function(e){t.chooseType(!1)}}},[t._v("Пользователь")])]),t._v(" "),o("div",{staticClass:"registration-default__block"},[o("button",{staticClass:"registration-default__button",on:{click:function(e){t.chooseType(!0)}}},[t._v("Организация")])])])]):o("div",{staticClass:"registration-form"},[t.isDefault?t._e():o("div",{staticClass:"registration-form__control"},[o("button",{staticClass:"registration-form__button",on:{click:t.returnBack}},[t._v("Вернуться")])]),t._v(" "),o("form",{staticClass:"login-form login-form--style",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[o("h3",{staticClass:"login-form__header"},[t._v("Регистрация "+t._s(t.registerName))]),t._v(" "),o("p",{staticClass:"par login-form__msg"},[t._v(t._s(t.msg))]),t._v(" "),o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          Логин:\n        ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"text",required:"",placeholder:"Логин"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          Пароль:\n        ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"password",required:"",placeholder:"Пароль"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          Пароль еще раз:\n        ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.repeatedPassword,expression:"repeatedPassword"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"password",required:"",placeholder:"Пароль еще раз"},domProps:{value:t.repeatedPassword},on:{input:function(e){e.target.composing||(t.repeatedPassword=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          E-mail:\n        ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"email",required:"",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),t.isCompany?o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          Название организации:\n        ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"text",required:"",placeholder:"Название организации"},domProps:{value:t.companyName},on:{input:function(e){e.target.composing||(t.companyName=e.target.value)}}})]):t._e(),t._v(" "),t.isCompany?o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          Описание организации:\n        ")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"login-form__input login-form__input--style",attrs:{required:"",rows:"4",placeholder:"Описание организации"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]):t._e(),t._v(" "),t.isCompany?o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          Специализация организации:\n        ")]),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.specialization,expression:"specialization"}],staticClass:"login-form__input login-form__input--style",attrs:{required:""},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.specialization=e.target.multiple?o:o[0]}}},[o("option",{attrs:{value:"education"}},[t._v("Учебное заведение")]),t._v(" "),o("option",{attrs:{value:"beauty"}},[t._v("Салоны красоты")]),t._v(" "),o("option",{attrs:{value:"other"}},[t._v("Другое")])])]):t._e(),t._v(" "),t._m(0)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-form__button-wrapper"},[e("input",{staticClass:"login-form__button login-form__button--style",attrs:{type:"submit",value:"Зарегистрироваться"}})])}]};var C=o("VU/8")(v,h,!1,function(t){o("77F0")},"data-v-131ad881",null).exports,y=o("K/Lq"),w=o.n(y),b=o("NYxO");function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";this.login=t,this.password=e,this.id=o,this.email=i,this.role=s}P.prototype.getLogin=function(){return this.login},P.prototype.getPassword=function(){return this.password},P.prototype.getId=function(){return this.id},P.prototype.getEmail=function(){return this.email},P.prototype.getRole=function(){return this.role},P.prototype.setLogin=function(t){this.login=t},P.prototype.setPassword=function(t){this.password=t},P.prototype.setId=function(t){this.id=t},P.prototype.setEmail=function(t){this.email=t},P.prototype.setRole=function(t){this.role=t};var N=P,L={state:{person:new N,companyName:"",companyDescription:"",companySpecialization:"",companyId:""},getters:{getEmail:function(t){return t.person.getEmail()},getId:function(t){return t.person.getId()},getRole:function(t){return t.person.getRole()},getLogin:function(t){return t.person.getLogin()},getPassword:function(t){return t.person.getPassword()},getCurrentPerson:function(t){return t.person}},mutations:{updatePerson:function(t,e){t.person=e},setCompanyName:function(t,e){t.companyName=e},setCompanyDescription:function(t,e){t.companyDescription=e},setCompanySpecialization:function(t,e){t.companySpecialization=e},setCompanyId:function(t,e){t.companyId=e}},actions:{loadPerson:function(t,e){var o=e,i=null;o.hasOwnProperty("head")?(t.commit("setCompanyName",o.name),t.commit("setCompanyDescription",o.description),t.commit("setCompanySpecialization",o.specialization),t.commit("setCompanyId",o.id),i=new N(o.head.login,o.head.password,o.head.id,o.head.email,o.head.role)):i=new N(o.login,o.password,o.id,o.email,o.role),t.commit("updatePerson",i)}}};i.a.use(b.a);var x=new b.a.Store({modules:{person:L}}),E={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",{staticClass:"error-header"},[this._v("404 Не Найдено")])])}]};var k=o("VU/8")({name:"Error"},E,!1,function(t){o("6+Z3")},"data-v-3843fdbd",null).exports;i.a.use(l.a),i.a.use(w.a);var z=new l.a({routes:[{path:"/",component:f,beforeEnter:function(t,e,o){var s=i.a.cookie.get("auth");if(s){s=JSON.parse(s),i.a.http.options.root="http://localhost:54153/Home/",i.a.http.get("authorization",{params:s}).then(function(t){var e=t.data;!1!==e?(i.a.cookie.set("auth",r()(s),1),x.dispatch("loadPerson",e)):(i.a.cookie.delete("auth"),i.a.router.push("/")),o()})}else o()}},{path:"/register",component:C},{path:"/error",component:k},{path:"*",redirect:"/error"}],mode:"history"}),$=o("8+8L");i.a.config.productionTip=!1,i.a.use(l.a),i.a.use(w.a),i.a.use($.a),i.a.http.options.root="http://localhost:54153/Home/",new i.a({el:"#app",router:z,store:x,components:{App:n},template:"<App/>"})},hgUZ:function(t,e){},"rGv/":function(t,e){t.exports={roleAdmin:"ROLE_ADMIN",roleUser:"ROLE_USER"}},zjCt:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1ef803d1410fb957b90c.js.map