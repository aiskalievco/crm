webpackJsonp([1],{0:function(t,e){},"6+Z3":function(t,e){},JPxZ:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=o("VU/8")({name:"App"},i,!1,function(t){o("zjCt")},null,null).exports,n=o("/ocq"),r={data:()=>({login:"",password:"",msg:"",resource:null}),props:{changeIsLogged:Function},methods:{authorize(){let t=this.login,e=this.password;if(t&&e)this.resource=this.$resource("auth"),this.resource.save({login:t,password:e}).then(function(o){let s=o.data;if(!1!==s)this.$cookie.set("auth",JSON.stringify({login:t,password:e}),1),this.$store.dispatch("loadPerson",s),this.$props.changeIsLogged(!0);else{this.msg="Ошибка! Неправильный логин или пароль";let t=this;setTimeout(function(){t.msg=""},4e3)}},function(t){});else{this.msg="Пожалуйста заполните данные перед отправкой";let t=this;setTimeout(function(){t.msg=""},4e3)}}}},l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("form",{staticClass:"login-form login-form--style",on:{submit:function(e){return e.preventDefault(),t.authorize(e)}}},[o("h3",{staticClass:"login-form__header"},[t._v("Авторизация")]),t._v(" "),o("p",{staticClass:"par login-form__msg"},[t._v(t._s(t.msg))]),t._v(" "),o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n        Логин:\n      ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"text",placeholder:"Логин"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n        Пароль:\n      ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),o("div",{staticClass:"login-form__register"},[t._v("\n      У Вас нет аккаунта?\n      "),o("router-link",{staticClass:"link login-form__register-link",attrs:{to:"/register",tag:"a"}},[t._v("\n        Зарегистрироваться\n      ")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-form__button-wrapper"},[e("input",{staticClass:"login-form__button login-form__button--style",attrs:{type:"submit",value:"Войти"}})])}]};var p=o("VU/8")(r,l,!1,function(t){o("jeco")},"data-v-190daeda",null).exports,c=o("rGv/"),u=o.n(c),m={data:()=>({isLogged:!1}),components:{loginForm:p},methods:{changeIsLogged(t){this.isLogged=t}},computed:{role(){return 0===this.$store.getters.getRole.toLowerCase().localeCompare(u.a.roleAdmin.toLowerCase())?"Аккаунт Организации":"Аккаунт Пользователя"}},created(){this.$cookie.get("auth")&&(this.isLogged=!0)}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[this.isLogged?e("div",{staticClass:"home-content"},[this._v("\n\n  "+this._s(this.role)+"\n\n  ")]):e("login-form",{attrs:{changeIsLogged:this.changeIsLogged}})],1)},staticRenderFns:[]};var d=o("VU/8")(m,_,!1,function(t){o("JPxZ")},"data-v-5e465dd2",null).exports,g={data:()=>({isDefault:!0,isCompany:!1,login:"",password:"",repeatedPassword:"",email:"",msg:"",companyName:"",description:"",specialization:"",resource:null}),methods:{register(){let t=this.password,e=this.repeatedPassword;if(this.checkPassword(t,e)){let t={login:this.login,password:this.password,email:this.email},e="reg";this.isCompany&&(e="organizationreg",t.name=this.companyName,t.description=this.description,t.specialization=this.specialization),this.resource=this.$resource(e),this.resource.save(t).then(function(){this.$router.push("/")},function(t){console.log(t)})}else{this.msg="Ваши пароли не совпадают";let t=this;setTimeout(function(){t.msg=""},4e3)}},checkPassword:(t,e)=>0===t.toString().toLowerCase().localeCompare(e.toString().toLowerCase()),chooseType(t){this.isCompany=t,this.isDefault=!1},returnBack(){this.isCompany=!1,this.isDefault=!0}},computed:{registerName(){return this.isCompany?"Организации":"Пользователя"}}},v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.isDefault?o("div",{staticClass:"registration-default"},[o("h2",{staticClass:"registration-default__header"},[t._v("Выберите тип аккаунта")]),t._v(" "),o("div",{staticClass:"registration-default__wrapper"},[o("div",{staticClass:"registration-default__block"},[o("button",{staticClass:"registration-default__button",on:{click:function(e){t.chooseType(!1)}}},[t._v("Пользователь")])]),t._v(" "),o("div",{staticClass:"registration-default__block"},[o("button",{staticClass:"registration-default__button",on:{click:function(e){t.chooseType(!0)}}},[t._v("Организация")])])])]):o("div",{staticClass:"registration-form"},[t.isDefault?t._e():o("div",{staticClass:"registration-form__control"},[o("button",{staticClass:"registration-form__button",on:{click:t.returnBack}},[t._v("Вернуться")])]),t._v(" "),o("form",{staticClass:"login-form login-form--style",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[o("h3",{staticClass:"login-form__header"},[t._v("Регистрация "+t._s(t.registerName))]),t._v(" "),o("p",{staticClass:"par login-form__msg"},[t._v(t._s(t.msg))]),t._v(" "),o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          Логин:\n        ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"text",required:"",placeholder:"Логин"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          Пароль:\n        ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"password",required:"",placeholder:"Пароль"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          Пароль еще раз:\n        ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.repeatedPassword,expression:"repeatedPassword"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"password",required:"",placeholder:"Пароль еще раз"},domProps:{value:t.repeatedPassword},on:{input:function(e){e.target.composing||(t.repeatedPassword=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          E-mail:\n        ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"email",required:"",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),t.isCompany?o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          Название организации:\n        ")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],staticClass:"login-form__input login-form__input--style",attrs:{type:"text",required:"",placeholder:"Название организации"},domProps:{value:t.companyName},on:{input:function(e){e.target.composing||(t.companyName=e.target.value)}}})]):t._e(),t._v(" "),t.isCompany?o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          Описание организации:\n        ")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"login-form__input login-form__input--style",attrs:{required:"",rows:"4",placeholder:"Описание организации"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]):t._e(),t._v(" "),t.isCompany?o("div",{staticClass:"login-form__input-wrapper"},[o("label",{staticClass:"login-form__label login-form__label--style"},[t._v("\n          Специализация организации:\n        ")]),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.specialization,expression:"specialization"}],staticClass:"login-form__input login-form__input--style",attrs:{required:""},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.specialization=e.target.multiple?o:o[0]}}},[o("option",{attrs:{value:"education"}},[t._v("Учебное заведение")]),t._v(" "),o("option",{attrs:{value:"beauty"}},[t._v("Салоны красоты")]),t._v(" "),o("option",{attrs:{value:"other"}},[t._v("Другое")])])]):t._e(),t._v(" "),t._m(0)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-form__button-wrapper"},[e("input",{staticClass:"login-form__button login-form__button--style",attrs:{type:"submit",value:"Зарегистрироваться"}})])}]};var f=o("VU/8")(g,v,!1,function(t){o("rA6n")},"data-v-44994c7c",null).exports,h=o("K/Lq"),y=o.n(h),C=o("NYxO");function w(t="",e="",o=-1,s="",i=""){this.login=t,this.password=e,this.id=o,this.email=s,this.role=i}w.prototype.getLogin=function(){return this.login},w.prototype.getPassword=function(){return this.password},w.prototype.getId=function(){return this.id},w.prototype.getEmail=function(){return this.email},w.prototype.getRole=function(){return this.role},w.prototype.setLogin=function(t){this.login=t},w.prototype.setPassword=function(t){this.password=t},w.prototype.setId=function(t){this.id=t},w.prototype.setEmail=function(t){this.email=t},w.prototype.setRole=function(t){this.role=t};var b=w;var P={state:{person:new b,companyName:"",companyDescription:"",companySpecialization:"",companyId:""},getters:{getEmail:t=>t.person.getEmail(),getId:t=>t.person.getId(),getRole:t=>t.person.getRole(),getLogin:t=>t.person.getLogin(),getPassword:t=>t.person.getPassword(),getCurrentPerson:t=>t.person},mutations:{updatePerson(t,e){t.person=e},setCompanyName(t,e){t.companyName=e},setCompanyDescription(t,e){t.companyDescription=e},setCompanySpecialization(t,e){t.companySpecialization=e},setCompanyId(t,e){t.companyId=e}},actions:{loadPerson(t,e){let o=e,s=null;o.hasOwnProperty("head")?(t.commit("setCompanyName",o.name),t.commit("setCompanyDescription",o.description),t.commit("setCompanySpecialization",o.specialization),t.commit("setCompanyId",o.id),s=new b(o.head.login,o.head.password,o.head.id,o.head.email,o.head.role)):s=new b(o.login,o.password,o.id,o.email,o.role),t.commit("updatePerson",s)}}};s.a.use(C.a);var N=new C.a.Store({modules:{person:P}}),x={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",{staticClass:"error-header"},[this._v("404 Не Найдено")])])}]};var L=o("VU/8")({name:"Error"},x,!1,function(t){o("6+Z3")},"data-v-3843fdbd",null).exports;s.a.use(n.a),s.a.use(y.a);var E=new n.a({routes:[{path:"/",component:d,beforeEnter(t,e,o){let i=s.a.cookie.get("auth");if(i){let t="auth";i=JSON.parse(i),s.a.http.options.root="http://localhost:44313/",s.a.http.save(t,{params:i}).then(function(t){let e=t.data;!1!==e?(s.a.cookie.set("auth",JSON.stringify(i),1),N.dispatch("loadPerson",e)):(s.a.cookie.delete("auth"),s.a.router.push("/")),o()})}else o()}},{path:"/register",component:f},{path:"/error",component:L},{path:"*",redirect:"/error"}],mode:"history"}),k=o("8+8L");s.a.config.productionTip=!1,s.a.use(n.a),s.a.use(y.a),s.a.use(k.a),s.a.http.options.root="http://localhost:44313/",new s.a({el:"#app",router:E,store:N,components:{App:a},template:"<App/>"})},jeco:function(t,e){},rA6n:function(t,e){},"rGv/":function(t,e){t.exports={roleAdmin:"ROLE_ADMIN",roleUser:"ROLE_USER"}},zjCt:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.cc57f743fdf1be9d698c.js.map